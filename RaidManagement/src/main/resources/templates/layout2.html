<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.w3.org/1999/xhtml" 
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
>
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<link rel="icon" href="/images/audiobook.png" th:href="@{/images/audiobook.png}" />

<link th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}" rel="stylesheet" media="screen" />

<!--  JQuery needed to support Bootstrap DatePicker -->
<script src="" th:src="@{/webjars/jquery/3.4.0/jquery.min.js}"></script>
<script src="" th:src="@{/webjars/jquery-cookie/1.4.1-1/jquery.cookie.js}"></script>
<!--  Bootstrap -->
<script src="" th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<!--  Bootstrap Date Picker -->
<script src="" th:src="@{/webjars/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js}"></script>
<!-- Font Awesome -->
<link th:href="@{/webjars/font-awesome/5.8.1/css/all.min.css}" rel="stylesheet" />

<!--  Custom (this needs to be loaded LAST -->
<script src="" th:src="@{/js/main.js}"></script>
<script src="" th:src="@{/js/custom.js}"></script>
<link th:href="@{/css/style.css}" rel="stylesheet" media="screen" />
<link th:href="@{/css/custom.css}" rel="stylesheet" media="screen" />

<title>AudiobookRss</title>

</head>

<body>
	<th:block layout:fragment="script"></th:block>

	<script th:inline="javascript"  type="text/javascript">
		var shard = {}; // create namespace for our app
	
		shard.config = {
			rootContext: ([[${@configurationManager.getOverrideUrl()}]] == '/'? '' : [[${@configurationManager.getOverrideUrl()}]] )
		}
	</script>

	<div class="container">
		<div class="navbar navbar-inverse">
			<div>
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Library Shard</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav" th:with="page=${#httpServletRequest.getServletPath()}">
						<li sec:authorize="isAuthenticated()" th:classappend="${page == '/secure' ? 'active' : ''}"><a href="#" th:href="@{/secure}">Home</a></li>
						<li sec:authorize="isAuthenticated()" th:classappend="${page == '/secure/browse' ? 'active' : ''}"><a href="#" th:href="@{/secure/browse}">Browse</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li sec:authorize="hasAuthority('ADMIN')"><a href="/secure/admin" th:href="@{/secure/admin}">Admin</a></li>
						<li sec:authorize="isAuthenticated()"><a href="/secure/user" th:href="@{/secure/user}">User</a></li>
						<li sec:authorize="!isAuthenticated()"><a href="/login" th:href="@{/login}">Sign in</a>
							<div style="color: gray" th:text="${#dates.format(#dates.createNow(),'YYYY/MM/dd HH:mm')}">13 february 2011</div></li>
						<li sec:authorize="isAuthenticated()"><a href="/logout" th:href="@{/logout}">Logout</a></li>
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</div>

		<hr />

		<!--/* Header fragment */-->
		<!--
		Enable if we want breadcrumbs 
		<div class="row">
			<div class="col-sm-12" sec:authorize="isAuthenticated()">
				<ol class="breadcrumb">
					<li><a href="#" th:href="@{/secure/index}">Main Menu</a></li>
					<th:block layout:fragment="breadcrumb"></th:block>
				</ol>
			</div>
		</div>
		-->

		<div th:if="${ successMessage!=null || errorMessage!=null }">
			<p class="alert alert-success" th:if="${successMessage!=null}" th:text="${successMessage}" />
			<p class="alert alert-danger" th:if="${errorMessage!=null}" th:text="${errorMessage}" />
		</div>

		<!--                    -->
		<!-- Body Content Begin -->
		<!--                    -->
		<div layout:fragment="content">Unresolved Content</div>
		<!--                    -->
		<!-- Body Content End   -->
		<!--                    -->

		<!-- Footer -->

		<hr />

		<div th:fragment="footer" th:align="center">
			<span>Footer</span>
		</div>
	</div>
</body>
</html>